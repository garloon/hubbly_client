<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Hubbly.Mobile.Converters"
             x:Class="Hubbly.Mobile.Components.PageHeader"
             x:Name="Root"
             HeightRequest="60">

    <ContentView.Resources>
        <ResourceDictionary>
            <converters:ScreenSizeToValueConverter x:Key="ScreenSizeConverter" />
        </ResourceDictionary>
    </ContentView.Resources>

    <Grid BackgroundColor="{DynamicResource CardBackgroundColor}"
          Padding="{StaticResource SpacingMd}"
          RowSpacing="0"
          ColumnSpacing="{StaticResource SpacingSm}">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />  <!-- Menu button -->
            <ColumnDefinition Width="*" />     <!-- Title -->
            <ColumnDefinition Width="Auto" />  <!-- Action button -->
        </Grid.ColumnDefinitions>

        <!-- Menu Button (Hamburger) -->
        <Frame Grid.Column="0"
               Padding="0"
               BackgroundColor="Transparent"
               WidthRequest="{Binding MenuButtonSize, Source={x:Reference Root}, Converter={StaticResource ScreenSizeConverter}, ConverterParameter='40|44|48|52'}"
               HeightRequest="{Binding MenuButtonSize, Source={x:Reference Root}, Converter={StaticResource ScreenSizeConverter}, ConverterParameter='40|44|48|52'}"
               CornerRadius="22"
               HasShadow="False"
               IsClippedToBounds="True"
               IsVisible="{Binding ShowMenuButton, Source={x:Reference Root}}">

            <Button Text="â˜°"
                    FontSize="{Binding MenuButtonFontSize, Source={x:Reference Root}}"
                    TextColor="{DynamicResource TextColor}"
                    BackgroundColor="Transparent"
                    BorderWidth="0"
                    Command="{Binding ToggleFlyoutCommand, Source={x:Reference Root}}"
                    HorizontalOptions="Center"
                    VerticalOptions="Center" />
        </Frame>

        <!-- Title -->
        <Label Grid.Column="1"
               Text="{Binding Title, Source={x:Reference Root}}"
               FontSize="{Binding TitleFontSize, Source={x:Reference Root}}"
               FontAttributes="Bold"
               TextColor="{DynamicResource TextColor}"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               LineBreakMode="NoWrap" />

        <!-- Action Button (Back or Custom) -->
        <Frame Grid.Column="2"
               Padding="0"
               BackgroundColor="Transparent"
               WidthRequest="{Binding ActionButtonSize, Source={x:Reference Root}, Converter={StaticResource ScreenSizeConverter}, ConverterParameter='40|44|48|52'}"
               HeightRequest="{Binding ActionButtonSize, Source={x:Reference Root}, Converter={StaticResource ScreenSizeConverter}, ConverterParameter='40|44|48|52'}"
               CornerRadius="22"
               HasShadow="False"
               IsClippedToBounds="True"
               IsVisible="{Binding ShowActionButton, Source={x:Reference Root}}">

            <Button Text="{Binding ActionButtonText, Source={x:Reference Root}}"
                    FontSize="{Binding ActionButtonFontSize, Source={x:Reference Root}}"
                    TextColor="{DynamicResource TextColor}"
                    BackgroundColor="Transparent"
                    BorderWidth="0"
                    Command="{Binding ActionCommand, Source={x:Reference Root}}"
                    HorizontalOptions="Center"
                    VerticalOptions="Center" />
        </Frame>
    </Grid>
</ContentView>
